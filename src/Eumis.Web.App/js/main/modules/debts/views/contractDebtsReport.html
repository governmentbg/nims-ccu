<ng-form name="reportSearchForm" sc-validate="{}" sc-form-readonly="false">
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="well well-sm">
        <div class="row">
          <sc-field type="nomenclature" alias="'months'" mode="id" ng-required="true" ng-model="filters.month" l10n-text="contractDebts_report_month" class="col-sm-4 col-md-3"></sc-field>
          <sc-field type="nomenclature" alias="'years'" mode="id" ng-required="true" ng-model="filters.year" l10n-text="contractDebts_report_year" class="col-sm-4 col-md-3"></sc-field>
          <sc-field type="nomenclature" alias="'availableProgrammes'" mode="id" ng-model="filters.programmeId" l10n-text="contractDebts_report_programme" class="col-sm-5"></sc-field>
          <div class="labeless col-sm-4 col-md-6">
            <sc-button name="seachBtn" btn-click="search()" text="contractDebts_report_search" class="btn btn-default btn-sm pull-right" icon="glyphicon-search"></sc-button>
          </div>
        </div>
      </div>

      <div ng-show="displayResult">
        <sc-link-button ng-href="{{exportUrl}}" target="_blank" sc-access-token style="position:relative;bottom:2px;"
          icon="fa-file-excel-o fa-lg fa-fw" text="contractDebts_report_excelExport" class="btn btn-default btn-xs pull-right">
        </sc-link-button>
        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_status"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_regNumber"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_company"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_contractNumber"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_regDate"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_modifyDate"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_irregularity"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_financialCorrection"></th>
                <th colspan="7" class="text-center" l10n-text="contractDebts_report_debt"></th>
                <th colspan="3" class="text-center" rowspan="2" l10n-text="contractDebts_report_newDebt"></th>
                <th colspan="8" class="text-center" l10n-text="contractDebts_report_reimbursedAmount"></th>
                <th colspan="8" class="text-center" l10n-text="contractDebts_report_deductedAmount"></th>
                <th colspan="3" class="text-center" rowspan="2" l10n-text="contractDebts_report_interestAmounts"></th>
                <th colspan="7" class="text-center" l10n-text="contractDebts_report_remainingDebt"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_num1"></th>
                <th rowspan="3" class="text-center" l10n-text="contractDebts_report_num2"></th>
              </tr>
              <tr>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_principal"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_interest"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_total"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_principal"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_interest"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_total"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_reimbursementDate"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_principal"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_interest"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_total"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_deductionDate"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_principal"></th>
                <th colspan="3" class="text-center" l10n-text="contractDebts_report_interest"></th>
                <th rowspan="2" class="text-center" l10n-text="contractDebts_report_total"></th>
              </tr>
              <tr>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
                <th class="text-center" l10n-text="contractDebts_report_eu"></th>
                <th class="text-center" l10n-text="contractDebts_report_bg"></th>
                <th class="text-center" l10n-text="contractDebts_report_total"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="contractDebt in contractDebts">
                <td>{{contractDebt.executionStatus}}</td>
                <td>{{contractDebt.regNumber}}</td>
                <td>{{contractDebt.company}}</td>
                <td>{{contractDebt.contractNumber}}</td>
                <td>{{contractDebt.regDate | date: 'dd.MM.yyyy'}}</td>
                <td>{{contractDebt.modifyDate | date: 'dd.MM.yyyy'}}</td>
                <td>{{contractDebt.irregularityNum}}</td>
                <td>{{contractDebt.financialCorrectionNum}}</td>
                <td>{{contractDebt.debtPrincipalBfpEuAmount}}</td>
                <td>{{contractDebt.debtPrincipalBfpBgAmount}}</td>
                <td>{{contractDebt.debtPrincipalTotalAmount}}</td>
                <td>{{contractDebt.debtInterestBfpEuAmount}}</td>
                <td>{{contractDebt.debtInterestBfpBgAmount}}</td>
                <td>{{contractDebt.debtInterestTotalAmount}}</td>
                <td>{{contractDebt.debtTotalAmount}}</td>
                <td>{{contractDebt.newDebtPrincipalBfpEuAmount}}</td>
                <td>{{contractDebt.newDebtPrincipalBfpBgAmount}}</td>
                <td>{{contractDebt.newDebtPrincipalTotalAmount}}</td>
                <td>{{contractDebt.raPrincipalBfpEuAmount}}</td>
                <td>{{contractDebt.raPrincipalBfpBgAmount}}</td>
                <td>{{contractDebt.raPrincipalBfpTotalAmount}}</td>
                <td>{{contractDebt.raInterestBfpEuAmount}}</td>
                <td>{{contractDebt.raInterestBfpBgAmount}}</td>
                <td>{{contractDebt.raInterestBfpTotalAmount}}</td>
                <td>{{contractDebt.raBfpTotalAmount}}</td>
                <td>{{contractDebt.reimbursementDate | date: 'dd.MM.yyyy'}}</td>
                <td>{{contractDebt.daPrincipalBfpEuAmount}}</td>
                <td>{{contractDebt.daPrincipalBfpBgAmount}}</td>
                <td>{{contractDebt.daPrincipalBfpTotalAmount}}</td>
                <td>{{contractDebt.daInterestBfpEuAmount}}</td>
                <td>{{contractDebt.daInterestBfpBgAmount}}</td>
                <td>{{contractDebt.daInterestBfpTotalAmount}}</td>
                <td>{{contractDebt.daBfpTotalAmount}}</td>
                <td>{{contractDebt.deductionDate | date: 'dd.MM.yyyy'}}</td>
                <td>{{contractDebt.interestBfpEuAmount}}</td>
                <td>{{contractDebt.interestBfpBgAmount}}</td>
                <td>{{contractDebt.interestTotalAmount}}</td>
                <td>{{contractDebt.remainingDebtPrincipalBfpEuAmount}}</td>
                <td>{{contractDebt.remainingDebtPrincipalBfpBgAmount}}</td>
                <td>{{contractDebt.remainingDebtPrincipalBfpTotalAmount}}</td>
                <td>{{contractDebt.remainingDebtInterestBfpEuAmount}}</td>
                <td>{{contractDebt.remainingDebtInterestBfpBgAmount}}</td>
                <td>{{contractDebt.remainingDebtInterestBfpTotalAmount}}</td>
                <td>{{contractDebt.remainingDebtBfpTotalAmount}}</td>
                <td>
                  <span ng-repeat="paymentCertReport in contractDebt.paymentsCertReports">
                    ИП{{paymentCertReport.paymentOrderNumber}}-ДС{{paymentCertReport.certReportOrderNumber}};
                  </span>
                </td>
                <td>
                  <span ng-repeat="correctionPaymentCertReport in contractDebt.correctionsCertReports">
                    ИП{{correctionPaymentCertReport.paymentOrderNumber}}-ДС{{correctionPaymentCertReport.certReportOrderNumber}};
                  </span>
                </td>
              </tr>

              <tr ng-if="contractDebts.length === 0">
                <td colspan="46" l10n-text="contractDebts_report_noResults"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</ng-form>